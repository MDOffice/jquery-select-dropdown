"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){null==t.fn.selectD&&(t.fn.selectD=function(s){if("object"===(void 0===(s=s||{})?"undefined":_typeof(s))){var n=this;return n.each(function(){var i=t.extend({wrap_class:"",text_class:"",text_active_class:"text_active_class",dropdown_icon:null,templateResult:function(t){return t.text},onChange:null},s);new e(t(this),n,i)}),this}throw new Error("Invalid arguments for SelectD: "+s)});var e=function(t,e,s){this.$element=t,this.$items=e,this.options=s,this.build(),this.renderLabel(),this.renderItems(),this._registerEvents(),t.addClass("selectD-hidden-accessible"),t.attr("aria-hidden","true")};e.prototype.build=function(){this.$element.hide(),this.$wrap=this.$element.wrap('<span class="selectD-wrap '+this.options.wrap_class+'">').parent(),this.$text=t('<span class="'+this.options.text_class+'"/>').appendTo(this.$wrap),this.options.dropdown_icon&&this.$wrap.append(this.options.dropdown_icon),this.$container=t('<span class="selectD-container">').appendTo(this.$wrap);var e=t('<span class="selectD-dropdown">');this.$container.append(e),this.$list=t('<ul class="selectD-results">').appendTo(e),this.parseOptions()},e.prototype.parseOptions=function(){var e=this;this.items=[],this.selected=[],this.$element.find("option").each(function(s,n){var i=t(n),o=i.val();e.items.push(s),e.items[s]={text:i.html().replace("&nbsp;"," ").trim(),value:o,element:n};var a=i.attr("data-width");a&&(e.items[s].width=a),i.is(":selected")&&(e.selected.push(o),e.selected[o]=e.items[s],e.options.onChange&&e.options.onChange(e.$element,e.$items,o))})},e.prototype.renderItems=function(){var e=this;this.$list.empty(),t.each(this.items,function(s,n){var i=t("<li>"+e.options.templateResult(n)+"</li>");e.selected.indexOf(n.value)>-1?i.addClass("highlighted"):i.removeClass("highlighted"),i.click(function(){e.clickItem(n)}),e.$list.append(i)})},e.prototype.renderLabel=function(){var t=this.selected[this.selected[0]],e=t.text;this.$text.html(e),this.options.text_active_class&&(""!==e?this.$wrap.addClass(this.options.text_active_class):this.$wrap.removeClass(this.options.text_active_class)),t.width&&this.$wrap.parent().css({width:t.width+"mm"})},e.prototype._registerEvents=function(){var e=this;this.$element.on("open",function(){t(".selectD-container--open").removeClass("selectD-container--open"),e.$container.addClass("selectD-container--open"),e.renderItems()}),this.$element.on("close",function(){e.$container.removeClass("selectD-container--open"),e.$wrap.append(e.$container)}),this.$element.on("change",function(){e.renderLabel(),e.close()}),t("body").on("click",function(){e.close()}),e.$wrap.on("click",function(t){t.stopPropagation(),e.$container.hasClass("selectD-container--open")?e.close():e.open()}),e.$list.on("click",function(t){t.stopPropagation()})},e.prototype.clickItem=function(t){this.selected=[t.value],this.selected[t.value]=t,this.$element.val(t.value),this.options.onChange&&this.options.onChange(this.$element,this.$items,t.value),this.$element.trigger("change")},e.prototype.open=function(){this.$container.appendTo("body"),this.$container.find(".selectD-dropdown").css({width:"250px"}),this.$container.find(".selectD-dropdown").addClass("selectD-dropdown--below"),this.$container.addClass("selectD-container--open");var t=this.$wrap;this.$container.css({position:"absolute",top:t.offset().top+t.height(),left:t.offset().left}),this.$element.trigger("open",{})},e.prototype.close=function(){this.$element.trigger("close")}}(jQuery);